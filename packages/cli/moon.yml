$schema: "https://moonrepo.dev/schemas/project.json"

language: "go"

tasks:
  install:
    command: "go mod download"
  build:
    command: "go build ./..."
    deps:
      - "install"
  test:
    command: "go test ./..."
  fmt:
    command: "bash"
    args:
      - "-lc"
      - "test -z \"$(gofmt -l .)\""
  check-weak:
    deps:
      - "fmt"
  check:
    deps:
      - "fmt"
      - "build"
  check-strong:
    deps:
      - "fmt"
      - "build"
      - "test"
