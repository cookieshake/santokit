# @santokit/client

**Santokit Client SDK** - Type-safe backend calls with full IntelliSense.

This package provides a robust, type-safe client for interacting with your Santokit backend. It is designed to work seamlessly with the metadata generated by the `stk` CLI, ensuring that your frontend code is always in sync with your backend definition.

## Features

- üõ°Ô∏è **Type-safe**: Autocompleted method calls based on your project schema.
- ‚ö° **Lightweight**: Minimal runtime overhead.
- üîÑ **Auto-sync**: Generated definitions ensure your client never drifts from the server.

## Installation

```bash
npm install @santokit/client
```

## Usage

### Initialization

After generating your project definitions with `stk sync`, you can initialize the client:

```typescript
import { createClient } from '@santokit/client';
// Import your generated type definitions (usually located in your src/santokit.ts or similar)
import type { AppRouter } from './generated/santokit'; 

const client = createClient<AppRouter>({
  projectId: 'your-project-id',
  endpoint: 'https://your-bridge-url.com', // defaults to production URL if not set
  token: 'optional-auth-token', // inject auth token for requests
});
```

### Making Calls

The client maps your logic namespaces to method calls.

#### Executing Logic
If you have logic defined in `logic/users/get.sql`:

```typescript
// backend: logic/users/get.sql
const user = await client.users.get({ id: '123' });
console.log(user);
```

#### Authentication
The client supports token management.

```typescript
// Set token dynamically (e.g., after login)
client.setToken('new-jwt-token');

// Clear token
client.setToken(null);
```

#### Error Handling
Calls throw typed errors that you can catch.

```typescript
try {
  await client.orders.create({ item: 'box' });
} catch (error) {
  console.error('Failed:', error.message);
}
```

## Development

```bash
# Install dependencies
npm install

# Build
npm run build

# Watch mode
npm run dev

# Run tests
npm test
```
