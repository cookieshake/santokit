# Permissions Configuration
# This file defines access control for auto-generated CRUD operations

# Owner column mapping for Row-Level Security (RLS)
ownerColumn:
  _default: user_id
  users: id
  posts: author_id

# Table-level permissions
tables:
  users:
    select: [authenticated]
    insert: [public]        # Anyone can sign up
    update: [owner, admin]
    delete: [admin]
    
    # Column-level permissions (overrides prefix defaults)
    columns:
      s_email:
        select: [owner, admin]
        update: [admin]      # Only admin can change email
      
      c_password_hash:
        select: []           # Never exposed
        update: []           # Use special logic only
  
  orders:
    select: [owner, admin]
    insert: [authenticated]
    update: [owner, admin]
    delete: [owner, admin]
  
  posts:
    select: [public]
    insert: [authenticated]
    update: [owner, admin]
    delete: [owner, admin]
  
  # Default permissions for tables not explicitly configured
  _default:
    select: [authenticated]
    insert: [authenticated]
    update: [owner, admin]
    delete: [admin]
